# Техническое задание (ТЗ) на разработку TeachAI

## 1. Назначение системы
TeachAI — это интеллектуальная обучающая система, предназначенная для интерактивного индивидуального обучения студентов. Она должна:
- Обеспечивать пошаговое изучение курсов с контролем знаний.
- Генерировать контент и тесты через OpenAI API.
- Поддерживать работу в графическом интерфейсе Jupyter Notebook с использованием интерактивных элементов.
- Сохранять прогресс и данные пользователей в формате JSON.
- Диагностировать и логировать все взаимодействия, включая ошибки и некорректные действия.

## 2. Функциональные требования

### 2.1. Начальное взаимодействие с пользователем
- При первом запуске система должна:
  1. Проверить наличие файла `.env` и параметра `OPENAI_API_KEY`. Если файл отсутствует или ключ не задан, выдавать ошибку с инструкцией, как это исправить.
  2. Спросить у пользователя:
     - Имя.
     - Общую продолжительность обучения (в часах).
     - Длительность одного занятия (в минутах).
     - Формат общения (формальный, дружеский, непринуждённый, краткий).
  3. Сохранить введенные данные в `state.json`.

### 2.2. Обучение и прохождение курса
- Курсы представляют собой иерархическую структуру:
  - Курс → Раздел → Тема → Урок.
- Система должна:
  - Генерировать уроки и тесты через OpenAI API.
  - Поддерживать линейное прохождение курсов, но предусмотреть возможность возврата к предыдущим урокам и пропуска отдельных уроков.
  - Отображать уроки с использованием интерактивных элементов Jupyter Notebook (`ipywidgets`).

### 2.3. Контроль знаний
- После каждого урока система задает 5 вопросов с выбором из 3 вариантов ответа.
- Для правильного ответа:
  - Подсвечивать его зеленым цветом.
- Для неправильного ответа:
  - Подсвечивать его красным цветом.
- Система должна:
  - Сохранять результаты тестов в `assessment_log.json`.
  - Пересчитывать и отображать средний балл за курс.

### 2.4. Логирование
- Логи хранятся в следующих файлах:
  - `lesson_history.md` — история уроков.
  - `questions_log.json` — вопросы пользователя.
  - `assessment_log.json` — результаты тестов.
  - `activity_log.json` — общее логирование действий.
- Логи должны включать:
  - Время действия.
  - Тип действия (успешное или с ошибкой).
  - Подробности ошибки (если есть).

### 2.5. Диагностика и отладка
- Все модули системы должны включать отладочные сообщения.
- При возникновении ошибок:
  - Указывать причину и возможные пути решения.
- Добавить тестовые сценарии для проверки функциональности.

### 2.6. Интерактивный интерфейс
- Использовать `ipywidgets` для:
  - Ввода текстовых данных.
  - Выбора из списка (например, курса или формата общения).
  - Кнопок для управления действиями (например, переход к следующему уроку).

## 3. Технические требования

### 3.1. Архитектура
- Модульная структура:
  - `engine.py` — основной модуль.
  - `state_manager.py` — управление состоянием.
  - `content_generator.py` — генерация контента.
  - `assessment.py` — контроль знаний.
  - `logger.py` — логирование.
  - `interface.py` — интерактивный интерфейс.
  - `config.py` — работа с `.env`.

### 3.2. Хранение данных
- Основной файл состояния: `state.json`.
- Формат: JSON с поддержкой вложенных структур.

### 3.3. Используемые библиотеки
- Python 3.8+.
- `openai` для работы с OpenAI API.
- `ipywidgets` для графического интерфейса.
- `python-dotenv` для работы с `.env`.

### 3.4. Обработка ошибок
- Некорректный ввод пользователя должен:
  - Поясняться пользователю.
  - Предлагаться повторный ввод.
- Ошибки API:
  - Сообщать пользователю о проблеме (например, превышение лимита запросов).
  - Предлагать повторить запрос позже.

## 4. План разработки

1. **Устранение ошибок**:
   - Проверить текущую реализацию модулей на предмет ошибок.
   - Добавить обработку отсутствия `.env` и ключа API.

2. **Реализация функционала**:
   - Генерация контента и тестов через OpenAI API.
   - Контроль знаний с подсветкой ответов.
   - Логирование всех действий.

3. **Улучшение кода**:
   - Добавить отладочные сообщения.
   - Оптимизировать архитектуру для предотвращения ошибок.
